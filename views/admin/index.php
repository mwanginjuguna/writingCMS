<?php

view('partials/header.php');
?>
    <div class="page-hero">
        <div class="page-hero-left">
            <h1 class="page-title">Admin Dashboard</h1>
            <p class="page-excerpt">
                Welcome, Admin!
            </p>

            <a href="/posts/create" class="btn secondary-btn">
                Create A New Post
            </a>
            <p style="margin-top:4em;" class="stat">Total Visitors: 300</p>

            <div class="quick-nav">
                <p><a href="/sitemap">View Sitemaps</a></p>
                <p><a href="/questions/new">Upload CSV</a></p>
                <p><a href="/admin-setup">Customize Website</a></p>
            </div>
        </div>

        <div class="page-hero-right">
            <div style="display:flex;flex-flow:column;gap:1em;">
                <div class="blurb">
                    <svg class="blurb-image" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M21.4115 5.89744C21.3613 5.23605 21.0744 4.6149 20.6035 4.14777C20.1326 3.68064 19.5092 3.39879 18.8474 3.35385C18.1808 3.30256 17.4218 3.25128 16.6218 3.21026V5.33333C16.6218 5.80936 16.4327 6.2659 16.0961 6.6025C15.7595 6.9391 15.303 7.12821 14.8269 7.12821C14.3509 7.12821 13.8944 6.9391 13.5578 6.6025C13.2212 6.2659 13.0321 5.80936 13.0321 5.33333V3.02564H10.4679V5.33333C10.4679 5.80936 10.2788 6.2659 9.94224 6.6025C9.60564 6.9391 9.14911 7.12821 8.67308 7.12821C8.19705 7.12821 7.74051 6.9391 7.40391 6.6025C7.06731 6.2659 6.87821 5.80936 6.87821 5.33333V3.21026C6.07821 3.21026 5.31923 3.30256 4.64231 3.35385C3.98481 3.39788 3.36546 3.67841 2.89872 4.14359C2.42761 4.61251 2.14014 5.23474 2.08846 5.89744C1.93462 7.79487 1.75 10.4923 1.75 12.5128C1.75 14.5333 1.93462 17.2308 2.08846 19.1385C2.14076 19.7964 2.42718 20.4138 2.89575 20.8786C3.36432 21.3434 3.98398 21.6248 4.64231 21.6718C6.3141 21.7949 9.44231 22 11.75 22C14.0577 22 17.1859 21.7949 18.8474 21.6718C19.5076 21.6272 20.1297 21.3468 20.6004 20.8817C21.0711 20.4167 21.3589 19.798 21.4115 19.1385C21.5654 17.2308 21.75 14.5333 21.75 12.5128C21.75 10.4923 21.5654 7.79487 21.4115 5.89744ZM11.75 15.8462H7.64744C7.44342 15.8462 7.24777 15.7651 7.10351 15.6209C6.95925 15.4766 6.87821 15.2809 6.87821 15.0769C6.87821 14.8729 6.95925 14.6773 7.10351 14.533C7.24777 14.3887 7.44342 14.3077 7.64744 14.3077H11.75C11.954 14.3077 12.1497 14.3887 12.2939 14.533C12.4382 14.6773 12.5192 14.8729 12.5192 15.0769C12.5192 15.2809 12.4382 15.4766 12.2939 15.6209C12.1497 15.7651 11.954 15.8462 11.75 15.8462ZM15.8526 11.7436H7.64744C7.44342 11.7436 7.24777 11.6625 7.10351 11.5183C6.95925 11.374 6.87821 11.1784 6.87821 10.9744C6.87821 10.7703 6.95925 10.5747 7.10351 10.4304C7.24777 10.2862 7.44342 10.2051 7.64744 10.2051H15.8526C16.0566 10.2051 16.2522 10.2862 16.3965 10.4304C16.5408 10.5747 16.6218 10.7703 16.6218 10.9744C16.6218 11.1784 16.5408 11.374 16.3965 11.5183C16.2522 11.6625 16.0566 11.7436 15.8526 11.7436Z" fill="#030D45"></path> <path d="M9.44231 2.76923V5.33333C9.44231 5.53735 9.36126 5.733 9.21701 5.87726C9.07275 6.02152 8.87709 6.10256 8.67308 6.10256C8.46906 6.10256 8.27341 6.02152 8.12915 5.87726C7.98489 5.733 7.90385 5.53735 7.90385 5.33333V2.76923C7.90385 2.56522 7.98489 2.36956 8.12915 2.2253C8.27341 2.08104 8.46906 2 8.67308 2C8.87709 2 9.07275 2.08104 9.21701 2.2253C9.36126 2.36956 9.44231 2.56522 9.44231 2.76923Z" fill="#030D45"></path> <path d="M15.5962 2.76923V5.33333C15.5962 5.53735 15.5151 5.733 15.3709 5.87726C15.2266 6.02152 15.0309 6.10256 14.8269 6.10256C14.6229 6.10256 14.4273 6.02152 14.283 5.87726C14.1387 5.733 14.0577 5.53735 14.0577 5.33333V2.76923C14.0577 2.56522 14.1387 2.36956 14.283 2.2253C14.4273 2.08104 14.6229 2 14.8269 2C15.0309 2 15.2266 2.08104 15.3709 2.2253C15.5151 2.36956 15.5962 2.56522 15.5962 2.76923Z" fill="#030D45"></path> </g>
                    </svg>

                    <div>
                        <h3 class="blurb-title"><?php echo $postsCount; ?></h3>
                        Posts
                    </div>

                </div>

                <div class="blurb">
                    <svg class="blurb-image" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M9.04082 2.50506C8.22449 2.30304 7.20408 2.10102 6.38776 2.10102C5.57143 2.10102 4.55102 2.30304 3.73469 2.50506C3.02041 2.60607 2.5102 3.21213 2.40816 3.9192C2.30612 4.72728 2 6.34344 2 7.45455C2 8.56566 2.20408 9.97981 2.30612 10.9899C2.40816 11.697 2.91837 12.303 3.63265 12.404C4.34694 12.6061 5.46939 12.7071 6.28571 12.7071C7.10204 12.7071 8.12245 12.5051 8.93878 12.404C9.65306 12.303 10.1633 11.697 10.2653 10.9899C10.4694 9.97981 10.5714 8.56566 10.5714 7.45455C10.5714 6.34344 10.3673 4.72728 10.2653 3.9192C10.2653 3.21213 9.7551 2.60607 9.04082 2.50506Z" fill="#030D45"></path> <path d="M20.2653 11.5958C19.551 11.3938 18.4286 11.2928 17.6123 11.2928C16.7959 11.2928 15.7755 11.4948 14.9592 11.5958C14.2449 11.6968 13.7347 12.3029 13.6327 13.01C13.4286 14.0201 13.3265 15.4342 13.3265 16.5453C13.3265 17.6564 13.5306 19.0706 13.6327 20.0807C13.7347 20.7877 14.2449 21.3938 14.9592 21.4948C15.6735 21.6968 16.7959 21.7978 17.6123 21.7978C18.4286 21.7978 19.449 21.5958 20.2653 21.4948C20.9796 21.3938 21.4898 20.7877 21.5918 20.0807C21.7959 19.0706 21.898 17.6564 21.898 16.5453C21.898 15.4342 21.7959 14.0201 21.5918 13.01C21.4898 12.3029 20.9796 11.6968 20.2653 11.5958Z" fill="#030D45"></path> <path d="M9.14286 15.6362C8.32653 15.4342 7.30612 15.3332 6.38776 15.3332C5.46939 15.3332 4.44898 15.5352 3.63265 15.6362C3.02041 15.7372 2.5102 16.2423 2.30612 16.8483C2.10204 17.5554 2 18.1615 2 18.6665C2 19.1716 2.10204 19.6766 2.30612 20.4847C2.5102 21.0908 3.02041 21.4948 3.63265 21.6968C4.44898 21.8989 5.46939 21.9999 6.38776 21.9999C7.30612 21.9999 8.32653 21.7978 9.14286 21.6968C9.7551 21.5958 10.2653 21.0908 10.4694 20.4847C10.6735 19.7776 10.7755 19.1716 10.7755 18.6665C10.7755 18.1615 10.6735 17.6564 10.4694 16.8483C10.2653 16.1413 9.7551 15.7372 9.14286 15.6362Z" fill="#030D45"></path> <path d="M14.8571 8.36354C15.6735 8.56557 16.6939 8.66658 17.6122 8.66658C18.5306 8.66658 19.551 8.46456 20.3673 8.36354C20.9796 8.26253 21.4898 7.75748 21.6939 7.15142C21.898 6.44435 22 5.83829 22 5.33324C22 4.82819 21.898 4.32314 21.6939 3.51506C21.4898 2.909 20.9796 2.50496 20.3673 2.30294C19.551 2.10092 18.5306 1.99991 17.6122 1.99991C16.6939 1.99991 15.6735 2.20193 14.8571 2.30294C14.2449 2.40395 13.7347 2.909 13.5306 3.51506C13.3265 4.22213 13.2245 4.82819 13.2245 5.33324C13.2245 5.83829 13.3265 6.34334 13.5306 7.15142C13.7347 7.85849 14.2449 8.26253 14.8571 8.36354Z" fill="#030D45"></path> </g>
                    </svg>

                    <div>
                        <h3 class="blurb-title"><?php echo $categoryCount; ?></h3>
                        Categories
                    </div>
                </div>

                <div class="blurb">
                    <svg class="blurb-image" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M21.2893 4.03046L19.7665 2.50761C19.4619 2.20305 18.9543 2 18.5482 2H14.4873C13.7767 2 13.066 2.30457 12.5584 2.81218L2.81218 12.5584C2.30457 13.066 2 13.7766 2 14.4873C2 15.198 2.30457 15.9086 2.81218 16.5178L7.48223 21.1878C7.98985 21.6954 8.70051 22 9.51269 22C10.2234 22 10.934 21.6954 11.4416 21.1878L21.1878 11.4416C21.6954 10.934 22 10.2233 22 9.51269V5.45178C21.8985 4.84264 21.6954 4.33503 21.2893 4.03046ZM16.0102 8.80203C15.5025 8.80203 14.9949 8.29442 14.9949 7.7868C14.9949 7.27919 15.5025 6.77157 16.0102 6.77157C16.5178 6.77157 17.0254 7.27919 17.0254 7.7868C17.0254 8.29442 16.5178 8.80203 16.0102 8.80203Z" fill="#030D45"></path> </g>
                    </svg>

                    <div>
                        <h3 class="blurb-title"><?php echo $tagCount; ?></h3>
                        Tags
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section class="section">
        <div class="question-form">
            <h2 class="section-title">Top Posts</h2>
            <div>
                <?php
                if (!empty($topPosts)) {
                    ?>
                <table>
                    <thead>
                    <tr>
                        <th>Title</th>
                        <th>Views</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php
                    foreach ($topPosts as $topPost) {
                        ?>
                        <tr>
                            <td><?= $topPost['title'] ?></td>
                            <td><?= $topPost['views'] ?></td>
                        </tr>
                            <?php
                    }
                    ?>
                    </tbody>
                </table>
                    <?php
                } else {
                    echo '<p>No enough data to display! Analytics data will be displayed as posts report views.</p>';
                }
                ?>

            </div>
        </div>
    </section>

<?php
view('partials/footer.php');
